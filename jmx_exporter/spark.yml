lowercaseOutputName: true
lowercaseOutputLabelNames: true
rules:
  - pattern: ".*"
  
  
  - pattern: 'metrics<application=([^,]+), name=([^,]+)><>([^:]+)'
    name: 'spark_application_$2'
    labels:
      application_id: '$1'
    value: '$3'
  
  - pattern: 'metrics<name=master\.([^,]+)><>([^:]+)'
    name: 'spark_master_$1'
    labels:
      component: 'master'
    value: '$2'

  - pattern: 'metrics<name=worker\.([^,]+)><>([^:]+)'
    name: 'spark_worker_$1'
    labels:
      component: 'worker'
    value: '$2'

  - pattern: 'java.lang:<name=G1 Old Generation, type=GarbageCollector, name=([^,]+)><>LastGCTools: ([^:]+)'
    name: 'jvm_gc_time_ms'
    labels:
      gc_name: '$1'
    value: '$2'